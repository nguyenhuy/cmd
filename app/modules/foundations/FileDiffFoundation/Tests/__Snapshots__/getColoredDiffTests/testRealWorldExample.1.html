<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="CocoaVersion">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; background-color: #fb0007; background-color: rgba(251, 0, 7, 0.2); min-height: 14.0px}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; color: #0d6401; }
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px;  min-height: 14.0px}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; }
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; color: #491187; }
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; color: #0d6401;  background-color: #22ff06; background-color: rgba(34, 255, 6, 0.2)}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; color: #97007e; }
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px;  background-color: #22ff06; background-color: rgba(34, 255, 6, 0.2); min-height: 14.0px}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; color: #b50013; }
span.s1 {font: 12.0px Helvetica}
span.s2 {font: 12.0px Helvetica; font-kerning: none}
span.s3 {font: 12.0px Helvetica; font-kerning: none; color: #97007e; }
span.s4 {font: 12.0px Helvetica; font-kerning: none; color: #000000; }
span.s5 {font: 12.0px Helvetica; font-kerning: none; color: #1400c4; }
span.s6 {font: 12.0px Helvetica; font-kerning: none; color: #491187; }
span.s7 {font: 12.0px Helvetica; font-kerning: none; color: #b50013; }
</style>
</head>
<body>
<p class="p1"><span class="s1"></span><br></p>
<p class="p2"><span class="s2">//</span></p>
<p class="p2"><span class="s2">//</span></p>
<p class="p2"><span class="s2">// Those are the interface for all the atomic APIs.</span></p>
<p class="p2"><span class="s2">// An example of a non atomic API call is sending a message with tool call:</span></p>
<p class="p2"><span class="s2">// <span class="Apple-converted-space">  </span>User send message -&gt;</span></p>
<p class="p2"><span class="s2">//<span class="Apple-converted-space">                  </span>&lt;- Assistant call tool</span></p>
<p class="p2"><span class="s2">// <span class="Apple-converted-space">  </span>User send tool input -&gt;</span></p>
<p class="p2"><span class="s2">//<span class="Apple-converted-space">                  </span>&lt;- Assistant send response</span></p>
<p class="p2"><span class="s2">//</span></p>
<p class="p2"><span class="s2">// Here the client sends two atomic API calls to the server.</span></p>
<p class="p3"><span class="s2"></span><br></p>
<p class="p4"><span class="s3">import</span><span class="s2"> Foundation</span></p>
<p class="p3"><span class="s2"></span><br></p>
<p class="p2"><span class="s2">// MARK: - Tool</span></p>
<p class="p3"><span class="s2"></span><br></p>
<p class="p2"><span class="s2">/// A tool that can be called by the assistant.</span></p>
<p class="p5"><span class="s3">public</span><span class="s4"> </span><span class="s3">protocol</span><span class="s4"> </span><span class="s2">Tool</span><span class="s4">: </span><span class="s2">Encodable</span><span class="s4">, </span><span class="s2">Sendable</span><span class="s4"> {</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">  </span></span><span class="s2">/// Executes the tool with the provided input and returns the result</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">  </span></span><span class="s2">/// - Parameter input: JSON data containing the tool's input parameters</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">  </span></span><span class="s2">/// - Returns: JSON data containing the tool's output</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">  </span></span><span class="s2">/// - Throws: Any errors that occur during tool execution</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">  </span></span><span class="s2">func</span><span class="s4"> </span><span class="s5">use</span><span class="s4">(</span><span class="s6">input</span><span class="s4">: </span><span class="s6">JSON</span><span class="s4">) </span><span class="s2">async</span><span class="s4"> </span><span class="s2">throws</span><span class="s4"> -&gt; </span><span class="s6">JSON</span></p>
<p class="p8"><span class="s2"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">  </span></span><span class="s2">/// The name of the tool</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s3">var</span><span class="s2"> name: </span><span class="s6">String</span><span class="s2"> { </span><span class="s3">get</span><span class="s2"> }</span></p>
<p class="p8"><span class="s2"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">  </span></span><span class="s2">/// A description of what the tool does and how to use it</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s3">var</span><span class="s2"> description: </span><span class="s6">String</span><span class="s2"> { </span><span class="s3">get</span><span class="s2"> }</span></p>
<p class="p8"><span class="s2"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">  </span></span><span class="s2">/// JSON schema defining the structure and validation rules for the tool's input</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s3">var</span><span class="s2"> inputSchema: </span><span class="s6">JSON</span><span class="s2"> { </span><span class="s3">get</span><span class="s2"> }</span></p>
<p class="p4"><span class="s2">}</span></p>
<p class="p3"><span class="s2"></span><br></p>
<p class="p2"><span class="s2">// MARK: - LLMModel</span></p>
<p class="p3"><span class="s2"></span><br></p>
<p class="p6"><span class="s2">/// Represents a Large Language Model available for use in the application</span></p>
<p class="p5"><span class="s3">public</span><span class="s4"> </span><span class="s3">struct</span><span class="s4"> </span><span class="s2">LLMModel</span><span class="s4">: </span><span class="s2">Hashable</span><span class="s4">, </span><span class="s2">Identifiable</span><span class="s4">, </span><span class="s2">CaseIterable</span><span class="s4">, </span><span class="s2">Sendable</span><span class="s4"> {</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">  </span></span><span class="s2">/// All available LLM models in the application</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s3">public</span><span class="s2"> </span><span class="s3">static</span><span class="s2"> </span><span class="s3">var</span><span class="s2"> allCases: [</span><span class="s6">LLMModel</span><span class="s2">] {</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">    </span>[.claudeSonnet, .gpt4o, .gpt4o_mini, .o1]</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">  </span>}</span></p>
<p class="p3"><span class="s2"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">  </span></span><span class="s2">/// The user-friendly display name of the model</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s3">public</span><span class="s2"> </span><span class="s3">let</span><span class="s2"> displayName: </span><span class="s6">String</span></p>
<p class="p8"><span class="s2"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">  </span></span><span class="s2">/// The unique identifier for the model used in API requests</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">  </span></span><span class="s2">public</span><span class="s4"> </span><span class="s2">let</span><span class="s4"> id: </span><span class="s6">String</span></p>
<p class="p3"><span class="s2"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">  </span></span><span class="s2">/// Claude 3.7 Sonnet model by Anthropic</span></p>
<p class="p9"><span class="s4"><span class="Apple-converted-space">  </span></span><span class="s3">public</span><span class="s4"> </span><span class="s3">static</span><span class="s4"> </span><span class="s3">let</span><span class="s4"> claudeSonnet = </span><span class="s6">LLMModel</span><span class="s4">(displayName: </span><span class="s2">"claude-3.7-sonnet"</span><span class="s4">, id: </span><span class="s2">"claude-3-7-sonnet-latest"</span><span class="s4">)</span></p>
<p class="p8"><span class="s2"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">  </span></span><span class="s2">/// gpt-latest model by OpenAI</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s3">public</span><span class="s2"> </span><span class="s3">static</span><span class="s2"> </span><span class="s3">let</span><span class="s2"> gpt4o = </span><span class="s6">LLMModel</span><span class="s2">(displayName: </span><span class="s7">"gpt-latest"</span><span class="s2">, id: </span><span class="s7">"gpt-latest"</span><span class="s2">)</span></p>
<p class="p8"><span class="s2"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">  </span></span><span class="s2">/// gpt-latest-mini model by OpenAI</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s3">public</span><span class="s2"> </span><span class="s3">static</span><span class="s2"> </span><span class="s3">let</span><span class="s2"> gpt4o_mini = </span><span class="s6">LLMModel</span><span class="s2">(displayName: </span><span class="s7">"gpt-latest-mini"</span><span class="s2">, id: </span><span class="s7">"gpt-latest-mini"</span><span class="s2">)</span></p>
<p class="p8"><span class="s2"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">  </span></span><span class="s2">/// o1 preview model by Deepmind</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s3">public</span><span class="s2"> </span><span class="s3">static</span><span class="s2"> </span><span class="s3">let</span><span class="s2"> o1 = </span><span class="s6">LLMModel</span><span class="s2">(displayName: </span><span class="s7">"o1"</span><span class="s2">, id: </span><span class="s7">"o1-preview"</span><span class="s2">)</span></p>
<p class="p4"><span class="s2">}</span></p>
</body>
</html>